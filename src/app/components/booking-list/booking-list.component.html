<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-6">My Bookings</h1>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        {{ errorMessage }}
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center items-center p-8">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>

    <!-- No Bookings Message -->
    <div *ngIf="!isLoading && bookings.length === 0"
        class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4">
        <p>You have no bookings yet. Visit the Studios page to book a studio.</p>
    </div>

    <!-- Bookings Table -->
    <div *ngIf="!isLoading && bookings.length > 0" class="bg-white shadow rounded-lg overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                        (click)="setSortField('date')">
                        Date & Time {{ getSortIcon('date') }}
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                        (click)="setSortField('studioName')">
                        Studio {{ getSortIcon('studioName') }}
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Price
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                        (click)="setSortField('clientName')">
                        Booked By {{ getSortIcon('clientName') }}
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Actions
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let booking of bookings">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">{{ booking.date | date:'MMM d, y' }}</div>
                        <div class="text-sm text-gray-500">{{ booking.startTime }} - {{ booking.endTime }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">{{ booking.studioName }}</div>
                        <div class="text-sm text-gray-500">{{ booking.studioType }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${{ booking.totalPrice | number:'1.2-2' }}</div>
                        <div class="text-sm text-gray-500">{{ booking.status }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">{{ booking.clientName }}</div>
                        <div class="text-sm text-gray-500">{{ booking.clientEmail }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button (click)="deleteBooking(booking.id)"
                            class="text-red-600 hover:text-red-900 ml-4 focus:outline-none">
                            Cancel
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>